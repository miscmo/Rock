\doxysection{sylar\+::Config\+Var$<$ T, From\+Str, To\+Str $>$ 模板类 参考}
\label{classsylar_1_1ConfigVar}\index{sylar::ConfigVar$<$ T, FromStr, ToStr $>$@{sylar::ConfigVar$<$ T, FromStr, ToStr $>$}}


配置参数模板子类,保存对应类型的参数值  




{\ttfamily \#include $<$config.\+h$>$}



类 sylar\+::Config\+Var$<$ T, From\+Str, To\+Str $>$ 继承关系图\+:
% FIG 0


sylar\+::Config\+Var$<$ T, From\+Str, To\+Str $>$ 的协作图\+:
% FIG 1
\doxysubsection*{Public 类型}
\begin{DoxyCompactItemize}
\item 
\mbox{\label{classsylar_1_1ConfigVar_a08408c8000ea5ed6110ed263d451abaf}} 
typedef \textbf{ R\+W\+Mutex} {\bfseries R\+W\+Mutex\+Type}
\item 
\mbox{\label{classsylar_1_1ConfigVar_abd0f84e7fd3f71427930a0be35861795}} 
typedef std\+::shared\+\_\+ptr$<$ \textbf{ Config\+Var} $>$ {\bfseries ptr}
\item 
\mbox{\label{classsylar_1_1ConfigVar_ad13171bcca35bc7ff1a27ba0fa1e83eb}} 
typedef std\+::function$<$ void(const T \&old\+\_\+value, const T \&new\+\_\+value)$>$ {\bfseries on\+\_\+change\+\_\+cb}
\end{DoxyCompactItemize}
\doxysubsection*{Public 成员函数}
\begin{DoxyCompactItemize}
\item 
\textbf{ Config\+Var} (const std\+::string \&name, const T \&default\+\_\+value, const std\+::string \&description=\char`\"{}\char`\"{})
\begin{DoxyCompactList}\small\item\em 通过参数名,参数值,描述构造\+Config\+Var \end{DoxyCompactList}\item 
std\+::string \textbf{ to\+String} () override
\begin{DoxyCompactList}\small\item\em 将参数值转换成\+Y\+A\+ML String \end{DoxyCompactList}\item 
bool \textbf{ from\+String} (const std\+::string \&val) override
\begin{DoxyCompactList}\small\item\em 从\+Y\+A\+ML String 转成参数的值 \end{DoxyCompactList}\item 
\mbox{\label{classsylar_1_1ConfigVar_a93d666116e61499d092b29b3a280bb6f}} 
const T \textbf{ get\+Value} ()
\begin{DoxyCompactList}\small\item\em 获取当前参数的值 \end{DoxyCompactList}\item 
void \textbf{ set\+Value} (const T \&v)
\begin{DoxyCompactList}\small\item\em 设置当前参数的值 \end{DoxyCompactList}\item 
\mbox{\label{classsylar_1_1ConfigVar_a0d5ccdbfa6b67de8c4e7d989ed2de90f}} 
std\+::string \textbf{ get\+Type\+Name} () const override
\begin{DoxyCompactList}\small\item\em 返回参数值的类型名称(typeinfo) \end{DoxyCompactList}\item 
uint64\+\_\+t \textbf{ add\+Listener} (on\+\_\+change\+\_\+cb cb)
\begin{DoxyCompactList}\small\item\em 添加变化回调函数 \end{DoxyCompactList}\item 
void \textbf{ del\+Listener} (uint64\+\_\+t key)
\begin{DoxyCompactList}\small\item\em 删除回调函数 \end{DoxyCompactList}\item 
on\+\_\+change\+\_\+cb \textbf{ get\+Listener} (uint64\+\_\+t key)
\begin{DoxyCompactList}\small\item\em 获取回调函数 \end{DoxyCompactList}\item 
\mbox{\label{classsylar_1_1ConfigVar_a85029db1324a67e4ecfdd8aac081ce44}} 
void \textbf{ clear\+Listener} ()
\begin{DoxyCompactList}\small\item\em 清理所有的回调函数 \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{额外继承的成员函数}


\doxysubsection{详细描述}
\subsubsection*{template$<$class T, class From\+Str = Lexical\+Cast$<$std\+::string, T$>$, class To\+Str = Lexical\+Cast$<$\+T, std\+::string$>$$>$\newline
class sylar\+::\+Config\+Var$<$ T, From\+Str, To\+Str $>$}

配置参数模板子类,保存对应类型的参数值 

T 参数的具体类型 From\+Str 从std\+::string转换成\+T类型的仿函数 To\+Str 从\+T转换成std\+::string的仿函数 std\+::string 为\+Y\+A\+M\+L格式的字符串 

\doxysubsection{构造及析构函数说明}
\mbox{\label{classsylar_1_1ConfigVar_a9c5915ab6991ddf8599384ebd1d2f065}} 
\index{sylar::ConfigVar$<$ T, FromStr, ToStr $>$@{sylar::ConfigVar$<$ T, FromStr, ToStr $>$}!ConfigVar@{ConfigVar}}
\index{ConfigVar@{ConfigVar}!sylar::ConfigVar$<$ T, FromStr, ToStr $>$@{sylar::ConfigVar$<$ T, FromStr, ToStr $>$}}
\doxysubsubsection{ConfigVar()}
{\footnotesize\ttfamily template$<$class T , class From\+Str  = Lexical\+Cast$<$std\+::string, T$>$, class To\+Str  = Lexical\+Cast$<$\+T, std\+::string$>$$>$ \\
\textbf{ sylar\+::\+Config\+Var}$<$ T, From\+Str, To\+Str $>$\+::\textbf{ Config\+Var} (\begin{DoxyParamCaption}\item[{const std\+::string \&}]{name,  }\item[{const T \&}]{default\+\_\+value,  }\item[{const std\+::string \&}]{description = {\ttfamily \char`\"{}\char`\"{}} }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



通过参数名,参数值,描述构造\+Config\+Var 


\begin{DoxyParams}[1]{参数}
\mbox{\texttt{ in}}  & {\em name} & 参数名称有效字符为[0-\/9a-\/z\+\_\+.] \\
\hline
\mbox{\texttt{ in}}  & {\em default\+\_\+value} & 参数的默认值 \\
\hline
\mbox{\texttt{ in}}  & {\em description} & 参数的描述 \\
\hline
\end{DoxyParams}


\doxysubsection{成员函数说明}
\mbox{\label{classsylar_1_1ConfigVar_a4cb77987924fdae7b5036990a0182ea6}} 
\index{sylar::ConfigVar$<$ T, FromStr, ToStr $>$@{sylar::ConfigVar$<$ T, FromStr, ToStr $>$}!addListener@{addListener}}
\index{addListener@{addListener}!sylar::ConfigVar$<$ T, FromStr, ToStr $>$@{sylar::ConfigVar$<$ T, FromStr, ToStr $>$}}
\doxysubsubsection{addListener()}
{\footnotesize\ttfamily template$<$class T , class From\+Str  = Lexical\+Cast$<$std\+::string, T$>$, class To\+Str  = Lexical\+Cast$<$\+T, std\+::string$>$$>$ \\
uint64\+\_\+t \textbf{ sylar\+::\+Config\+Var}$<$ T, From\+Str, To\+Str $>$\+::add\+Listener (\begin{DoxyParamCaption}\item[{on\+\_\+change\+\_\+cb}]{cb }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



添加变化回调函数 

\begin{DoxyReturn}{返回}
返回该回调函数对应的唯一id,用于删除回调 
\end{DoxyReturn}
\mbox{\label{classsylar_1_1ConfigVar_a99f10a04e93a9cc859e7d10129146dab}} 
\index{sylar::ConfigVar$<$ T, FromStr, ToStr $>$@{sylar::ConfigVar$<$ T, FromStr, ToStr $>$}!delListener@{delListener}}
\index{delListener@{delListener}!sylar::ConfigVar$<$ T, FromStr, ToStr $>$@{sylar::ConfigVar$<$ T, FromStr, ToStr $>$}}
\doxysubsubsection{delListener()}
{\footnotesize\ttfamily template$<$class T , class From\+Str  = Lexical\+Cast$<$std\+::string, T$>$, class To\+Str  = Lexical\+Cast$<$\+T, std\+::string$>$$>$ \\
void \textbf{ sylar\+::\+Config\+Var}$<$ T, From\+Str, To\+Str $>$\+::del\+Listener (\begin{DoxyParamCaption}\item[{uint64\+\_\+t}]{key }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



删除回调函数 


\begin{DoxyParams}[1]{参数}
\mbox{\texttt{ in}}  & {\em key} & 回调函数的唯一id \\
\hline
\end{DoxyParams}
\mbox{\label{classsylar_1_1ConfigVar_a977245d654a3d6d31be8e1b99846ad4b}} 
\index{sylar::ConfigVar$<$ T, FromStr, ToStr $>$@{sylar::ConfigVar$<$ T, FromStr, ToStr $>$}!fromString@{fromString}}
\index{fromString@{fromString}!sylar::ConfigVar$<$ T, FromStr, ToStr $>$@{sylar::ConfigVar$<$ T, FromStr, ToStr $>$}}
\doxysubsubsection{fromString()}
{\footnotesize\ttfamily template$<$class T , class From\+Str  = Lexical\+Cast$<$std\+::string, T$>$, class To\+Str  = Lexical\+Cast$<$\+T, std\+::string$>$$>$ \\
bool \textbf{ sylar\+::\+Config\+Var}$<$ T, From\+Str, To\+Str $>$\+::from\+String (\begin{DoxyParamCaption}\item[{const std\+::string \&}]{val }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}}



从\+Y\+A\+ML String 转成参数的值 


\begin{DoxyExceptions}{异常}
{\em 当转换失败抛出异常} & \\
\hline
\end{DoxyExceptions}


实现了 \textbf{ sylar\+::\+Config\+Var\+Base} \doxyref{}{p.}{classsylar_1_1ConfigVarBase_a747792b1cfc384a30b1c8f090d9af6b6}.

函数调用图\+:
% FIG 2
\mbox{\label{classsylar_1_1ConfigVar_a7e04703e538bb4f6189e8f5425ce654a}} 
\index{sylar::ConfigVar$<$ T, FromStr, ToStr $>$@{sylar::ConfigVar$<$ T, FromStr, ToStr $>$}!getListener@{getListener}}
\index{getListener@{getListener}!sylar::ConfigVar$<$ T, FromStr, ToStr $>$@{sylar::ConfigVar$<$ T, FromStr, ToStr $>$}}
\doxysubsubsection{getListener()}
{\footnotesize\ttfamily template$<$class T , class From\+Str  = Lexical\+Cast$<$std\+::string, T$>$, class To\+Str  = Lexical\+Cast$<$\+T, std\+::string$>$$>$ \\
on\+\_\+change\+\_\+cb \textbf{ sylar\+::\+Config\+Var}$<$ T, From\+Str, To\+Str $>$\+::get\+Listener (\begin{DoxyParamCaption}\item[{uint64\+\_\+t}]{key }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



获取回调函数 


\begin{DoxyParams}[1]{参数}
\mbox{\texttt{ in}}  & {\em key} & 回调函数的唯一id \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{返回}
如果存在返回对应的回调函数,否则返回nullptr 
\end{DoxyReturn}
\mbox{\label{classsylar_1_1ConfigVar_a0efde2e43919caa1d60b25022baf34d8}} 
\index{sylar::ConfigVar$<$ T, FromStr, ToStr $>$@{sylar::ConfigVar$<$ T, FromStr, ToStr $>$}!setValue@{setValue}}
\index{setValue@{setValue}!sylar::ConfigVar$<$ T, FromStr, ToStr $>$@{sylar::ConfigVar$<$ T, FromStr, ToStr $>$}}
\doxysubsubsection{setValue()}
{\footnotesize\ttfamily template$<$class T , class From\+Str  = Lexical\+Cast$<$std\+::string, T$>$, class To\+Str  = Lexical\+Cast$<$\+T, std\+::string$>$$>$ \\
void \textbf{ sylar\+::\+Config\+Var}$<$ T, From\+Str, To\+Str $>$\+::set\+Value (\begin{DoxyParamCaption}\item[{const T \&}]{v }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



设置当前参数的值 

如果参数的值有发生变化,则通知对应的注册回调函数 \mbox{\label{classsylar_1_1ConfigVar_ab7f80240eb387bf8c3c7fb63b768da1d}} 
\index{sylar::ConfigVar$<$ T, FromStr, ToStr $>$@{sylar::ConfigVar$<$ T, FromStr, ToStr $>$}!toString@{toString}}
\index{toString@{toString}!sylar::ConfigVar$<$ T, FromStr, ToStr $>$@{sylar::ConfigVar$<$ T, FromStr, ToStr $>$}}
\doxysubsubsection{toString()}
{\footnotesize\ttfamily template$<$class T , class From\+Str  = Lexical\+Cast$<$std\+::string, T$>$, class To\+Str  = Lexical\+Cast$<$\+T, std\+::string$>$$>$ \\
std\+::string \textbf{ sylar\+::\+Config\+Var}$<$ T, From\+Str, To\+Str $>$\+::to\+String (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}}



将参数值转换成\+Y\+A\+ML String 


\begin{DoxyExceptions}{异常}
{\em 当转换失败抛出异常} & \\
\hline
\end{DoxyExceptions}


实现了 \textbf{ sylar\+::\+Config\+Var\+Base} \doxyref{}{p.}{classsylar_1_1ConfigVarBase_a5f8b4b6e0f6fbed4790f31981b8f190c}.



该类的文档由以下文件生成\+:\begin{DoxyCompactItemize}
\item 
sylar/\textbf{ config.\+h}\end{DoxyCompactItemize}
