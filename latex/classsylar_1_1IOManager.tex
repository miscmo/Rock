\doxysection{rock\+::I\+O\+Manager类 参考}
\label{classrock_1_1IOManager}\index{rock::IOManager@{rock::IOManager}}


基于\+Epoll的\+I\+O协程调度器  




{\ttfamily \#include $<$iomanager.\+h$>$}



类 rock\+::I\+O\+Manager 继承关系图\+:
% FIG 0


rock\+::I\+O\+Manager 的协作图\+:
% FIG 1
\doxysubsection*{Public 类型}
\begin{DoxyCompactItemize}
\item 
enum \textbf{ Event} \{ \textbf{ N\+O\+NE} = 0x0, 
\textbf{ R\+E\+AD} = 0x1, 
\textbf{ W\+R\+I\+TE} = 0x4
 \}
\begin{DoxyCompactList}\small\item\em I\+O事件 \end{DoxyCompactList}\item 
\mbox{\label{classrock_1_1IOManager_a840e581e311eba40f92e43c5053e7060}} 
typedef std\+::shared\+\_\+ptr$<$ \textbf{ I\+O\+Manager} $>$ {\bfseries ptr}
\item 
\mbox{\label{classrock_1_1IOManager_abcf0eabb8ce7a492a019575fde00f0bf}} 
typedef \textbf{ R\+W\+Mutex} {\bfseries R\+W\+Mutex\+Type}
\end{DoxyCompactItemize}
\doxysubsection*{Public 成员函数}
\begin{DoxyCompactItemize}
\item 
\textbf{ I\+O\+Manager} (size\+\_\+t threads=1, bool use\+\_\+caller=true, const std\+::string \&name=\char`\"{}\char`\"{})
\begin{DoxyCompactList}\small\item\em 构造函数 \end{DoxyCompactList}\item 
\mbox{\label{classrock_1_1IOManager_a58fee9eb690cdf0269b57fb7d813e9f7}} 
\textbf{ $\sim$\+I\+O\+Manager} ()
\begin{DoxyCompactList}\small\item\em 析构函数 \end{DoxyCompactList}\item 
int \textbf{ add\+Event} (int fd, \textbf{ Event} event, std\+::function$<$ void()$>$ cb=nullptr)
\begin{DoxyCompactList}\small\item\em 添加事件 \end{DoxyCompactList}\item 
bool \textbf{ del\+Event} (int fd, \textbf{ Event} event)
\begin{DoxyCompactList}\small\item\em 删除事件 \end{DoxyCompactList}\item 
bool \textbf{ cancel\+Event} (int fd, \textbf{ Event} event)
\begin{DoxyCompactList}\small\item\em 取消事件 \end{DoxyCompactList}\item 
bool \textbf{ cancel\+All} (int fd)
\begin{DoxyCompactList}\small\item\em 取消所有事件 \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{静态 Public 成员函数}
\begin{DoxyCompactItemize}
\item 
\mbox{\label{classrock_1_1IOManager_a84320322b91d83534bbcc34086d4468c}} 
static \textbf{ I\+O\+Manager} $\ast$ \textbf{ Get\+This} ()
\begin{DoxyCompactList}\small\item\em 返回当前的\+I\+O\+Manager \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Protected 成员函数}
\begin{DoxyCompactItemize}
\item 
\mbox{\label{classrock_1_1IOManager_a28895129097dd6e85698bd52aa2f30cd}} 
void \textbf{ tickle} () override
\begin{DoxyCompactList}\small\item\em 通知协程调度器有任务了 \end{DoxyCompactList}\item 
\mbox{\label{classrock_1_1IOManager_aec614100855edd1e48d23afb67468b45}} 
bool \textbf{ stopping} () override
\begin{DoxyCompactList}\small\item\em 返回是否可以停止 \end{DoxyCompactList}\item 
\mbox{\label{classrock_1_1IOManager_ab68c334a1b1c0bbd8f016b28f6715c13}} 
void \textbf{ idle} () override
\begin{DoxyCompactList}\small\item\em 协程无任务可调度时执行idle协程 \end{DoxyCompactList}\item 
\mbox{\label{classrock_1_1IOManager_aae440d45abd9ab0667b964fd71126ffb}} 
void \textbf{ on\+Timer\+Inserted\+At\+Front} () override
\begin{DoxyCompactList}\small\item\em 当有新的定时器插入到定时器的首部,执行该函数 \end{DoxyCompactList}\item 
void \textbf{ context\+Resize} (size\+\_\+t size)
\begin{DoxyCompactList}\small\item\em 重置socket句柄上下文的容器大小 \end{DoxyCompactList}\item 
bool \textbf{ stopping} (uint64\+\_\+t \&timeout)
\begin{DoxyCompactList}\small\item\em 判断是否可以停止 \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{额外继承的成员函数}


\doxysubsection{详细描述}
基于\+Epoll的\+I\+O协程调度器 

\doxysubsection{成员枚举类型说明}
\mbox{\label{classrock_1_1IOManager_a92053b21305a9cd1e0854f60a9ddde7f}} 
\index{rock::IOManager@{rock::IOManager}!Event@{Event}}
\index{Event@{Event}!rock::IOManager@{rock::IOManager}}
\doxysubsubsection{Event}
{\footnotesize\ttfamily enum \textbf{ rock\+::\+I\+O\+Manager\+::\+Event}}



I\+O事件 

\begin{DoxyEnumFields}{枚举值}
\raisebox{\heightof{T}}[0pt][0pt]{\index{NONE@{NONE}!rock::IOManager@{rock::IOManager}}\index{rock::IOManager@{rock::IOManager}!NONE@{NONE}}}\mbox{\label{classrock_1_1IOManager_a92053b21305a9cd1e0854f60a9ddde7faadc83980f9a40fcf08169d6ad2ad23a3}} 
N\+O\+NE&无事件 \\
\hline

\raisebox{\heightof{T}}[0pt][0pt]{\index{READ@{READ}!rock::IOManager@{rock::IOManager}}\index{rock::IOManager@{rock::IOManager}!READ@{READ}}}\mbox{\label{classrock_1_1IOManager_a92053b21305a9cd1e0854f60a9ddde7fa090891b5bdc9b68bfba5a8f37dbf5515}} 
R\+E\+AD&读事件(\+E\+P\+O\+L\+L\+I\+N) \\
\hline

\raisebox{\heightof{T}}[0pt][0pt]{\index{WRITE@{WRITE}!rock::IOManager@{rock::IOManager}}\index{rock::IOManager@{rock::IOManager}!WRITE@{WRITE}}}\mbox{\label{classrock_1_1IOManager_a92053b21305a9cd1e0854f60a9ddde7fa5374ec6931815ee5254402a638a9db51}} 
W\+R\+I\+TE&写事件(\+E\+P\+O\+L\+L\+O\+U\+T) \\
\hline

\end{DoxyEnumFields}


\doxysubsection{构造及析构函数说明}
\mbox{\label{classrock_1_1IOManager_afc89b6386f058c60697e6d0ffdf65da7}} 
\index{rock::IOManager@{rock::IOManager}!IOManager@{IOManager}}
\index{IOManager@{IOManager}!rock::IOManager@{rock::IOManager}}
\doxysubsubsection{IOManager()}
{\footnotesize\ttfamily rock\+::\+I\+O\+Manager\+::\+I\+O\+Manager (\begin{DoxyParamCaption}\item[{size\+\_\+t}]{threads = {\ttfamily 1},  }\item[{bool}]{use\+\_\+caller = {\ttfamily true},  }\item[{const std\+::string \&}]{name = {\ttfamily \char`\"{}\char`\"{}} }\end{DoxyParamCaption})}



构造函数 


\begin{DoxyParams}[1]{参数}
\mbox{\texttt{ in}}  & {\em threads} & 线程数量 \\
\hline
\mbox{\texttt{ in}}  & {\em use\+\_\+caller} & 是否将调用线程包含进去 \\
\hline
\mbox{\texttt{ in}}  & {\em name} & 调度器的名称 \\
\hline
\end{DoxyParams}


\doxysubsection{成员函数说明}
\mbox{\label{classrock_1_1IOManager_a11db87578175f119af195c313ead7b32}} 
\index{rock::IOManager@{rock::IOManager}!addEvent@{addEvent}}
\index{addEvent@{addEvent}!rock::IOManager@{rock::IOManager}}
\doxysubsubsection{addEvent()}
{\footnotesize\ttfamily int rock\+::\+I\+O\+Manager\+::add\+Event (\begin{DoxyParamCaption}\item[{int}]{fd,  }\item[{\textbf{ Event}}]{event,  }\item[{std\+::function$<$ void()$>$}]{cb = {\ttfamily nullptr} }\end{DoxyParamCaption})}



添加事件 


\begin{DoxyParams}[1]{参数}
\mbox{\texttt{ in}}  & {\em fd} & socket句柄 \\
\hline
\mbox{\texttt{ in}}  & {\em event} & 事件类型 \\
\hline
\mbox{\texttt{ in}}  & {\em cb} & 事件回调函数 \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{返回}
添加成功返回0,失败返回-\/1 
\end{DoxyReturn}
\mbox{\label{classrock_1_1IOManager_a4be82a8ec8ce0653e5a90bc3a2d4450d}} 
\index{rock::IOManager@{rock::IOManager}!cancelAll@{cancelAll}}
\index{cancelAll@{cancelAll}!rock::IOManager@{rock::IOManager}}
\doxysubsubsection{cancelAll()}
{\footnotesize\ttfamily bool rock\+::\+I\+O\+Manager\+::cancel\+All (\begin{DoxyParamCaption}\item[{int}]{fd }\end{DoxyParamCaption})}



取消所有事件 


\begin{DoxyParams}[1]{参数}
\mbox{\texttt{ in}}  & {\em fd} & socket句柄 \\
\hline
\end{DoxyParams}
\mbox{\label{classrock_1_1IOManager_a3939d465df257f6e591aa405f24f7c3a}} 
\index{rock::IOManager@{rock::IOManager}!cancelEvent@{cancelEvent}}
\index{cancelEvent@{cancelEvent}!rock::IOManager@{rock::IOManager}}
\doxysubsubsection{cancelEvent()}
{\footnotesize\ttfamily bool rock\+::\+I\+O\+Manager\+::cancel\+Event (\begin{DoxyParamCaption}\item[{int}]{fd,  }\item[{\textbf{ Event}}]{event }\end{DoxyParamCaption})}



取消事件 


\begin{DoxyParams}[1]{参数}
\mbox{\texttt{ in}}  & {\em fd} & socket句柄 \\
\hline
\mbox{\texttt{ in}}  & {\em event} & 事件类型 \\
\hline
\end{DoxyParams}
\begin{DoxyAttention}{注意}
如果事件存在则触发事件 
\end{DoxyAttention}
\mbox{\label{classrock_1_1IOManager_a887c03f40a7360591ca9b945b7a76714}} 
\index{rock::IOManager@{rock::IOManager}!contextResize@{contextResize}}
\index{contextResize@{contextResize}!rock::IOManager@{rock::IOManager}}
\doxysubsubsection{contextResize()}
{\footnotesize\ttfamily void rock\+::\+I\+O\+Manager\+::context\+Resize (\begin{DoxyParamCaption}\item[{size\+\_\+t}]{size }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}



重置socket句柄上下文的容器大小 


\begin{DoxyParams}[1]{参数}
\mbox{\texttt{ in}}  & {\em size} & 容量大小 \\
\hline
\end{DoxyParams}
\mbox{\label{classrock_1_1IOManager_a75d9ef80cbaea0b0f5fbef325fd38a9d}} 
\index{rock::IOManager@{rock::IOManager}!delEvent@{delEvent}}
\index{delEvent@{delEvent}!rock::IOManager@{rock::IOManager}}
\doxysubsubsection{delEvent()}
{\footnotesize\ttfamily bool rock\+::\+I\+O\+Manager\+::del\+Event (\begin{DoxyParamCaption}\item[{int}]{fd,  }\item[{\textbf{ Event}}]{event }\end{DoxyParamCaption})}



删除事件 


\begin{DoxyParams}[1]{参数}
\mbox{\texttt{ in}}  & {\em fd} & socket句柄 \\
\hline
\mbox{\texttt{ in}}  & {\em event} & 事件类型 \\
\hline
\end{DoxyParams}
\begin{DoxyAttention}{注意}
不会触发事件 
\end{DoxyAttention}
\mbox{\label{classrock_1_1IOManager_a5cc8bc218e13cf197930f8e0b2e9f458}} 
\index{rock::IOManager@{rock::IOManager}!stopping@{stopping}}
\index{stopping@{stopping}!rock::IOManager@{rock::IOManager}}
\doxysubsubsection{stopping()}
{\footnotesize\ttfamily bool rock\+::\+I\+O\+Manager\+::stopping (\begin{DoxyParamCaption}\item[{uint64\+\_\+t \&}]{timeout }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}



判断是否可以停止 


\begin{DoxyParams}[1]{参数}
\mbox{\texttt{ out}}  & {\em timeout} & 最近要出发的定时器事件间隔 \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{返回}
返回是否可以停止 
\end{DoxyReturn}


该类的文档由以下文件生成\+:\begin{DoxyCompactItemize}
\item 
rock/\textbf{ iomanager.\+h}\end{DoxyCompactItemize}
